---
openapi: 3.0.1
info:
  title: Regard Auth Service API
  version: v1
paths:
  "/profile":
    get:
      summary: Profile
      tags:
      - Authentication
      security:
      - bearerAuth: []
      responses:
        '200':
          description: profile returned
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ProfileResponse"
        '401':
          description: unauthorized
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ErrorResponse"
  "/login":
    post:
      summary: Login
      tags:
      - Authentication
      parameters: []
      responses:
        '200':
          description: login success
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/LoginResponse"
        '401':
          description: invalid credentials
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ErrorResponse"
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/LoginRequest"
  "/register":
    post:
      summary: Register user
      tags:
      - Authentication
      parameters: []
      responses:
        '201':
          description: user created
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/RegisterResponse"
        '422':
          description: validation errors
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ValidationErrorResponse"
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/RegisterRequest"
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
      required:
      - error
    ValidationErrorResponse:
      type: object
      properties:
        errors:
          type: array
          items:
            type: string
      required:
      - errors
    RegisterRequest:
      type: object
      properties:
        user:
          type: object
          properties:
            name:
              type: string
              example: Test User
            email:
              type: string
              example: test@example.com
            password:
              type: string
              example: password123
            password_confirmation:
              type: string
              example: password123
          required:
          - name
          - email
          - password
          - password_confirmation
      required:
      - user
    UserResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        email:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
      - id
      - name
      - email
      - created_at
      - updated_at
    RegisterResponse:
      type: object
      properties:
        user:
          "$ref": "#/components/schemas/UserResponse"
        token:
          type: string
      required:
      - user
      - token
    LoginRequest:
      type: object
      properties:
        email:
          type: string
          example: test@example.com
        password:
          type: string
          example: password123
      required:
      - email
      - password
    LoginResponse:
      type: object
      properties:
        token:
          type: string
        expires_in:
          type: integer
          example: 86400
      required:
      - token
      - expires_in
    ProfileResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        email:
          type: string
      required:
      - id
      - name
      - email
